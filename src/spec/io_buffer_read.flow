                                  FLOW DIAGRAM
                                 io_buffer_read

          ┌─────────────┐       ┌─────────────┐       ┌─────────────┐
          │buffer is    │   N   │amount is >  │ N     │initialize  ││
          │initialized? │──────►│than buffer  │──────►│with buffer ││
          │             │       │size?        │       │size        ││
          └──────┬──────┘       └──────┬──────┘       └─────────────┘
                 │                     │
                 │Y                    │Y             ┌─────────────┐
                 │                     │              │initialize  ││
                 │                     └─────────────►│with buffer ││
                 │                                    │size+amount ││
                 │                                    └─────────────┘
                 ▼
          ┌─────────────┐       ┌─────────────┐       ┌─────────────┐
          │amount       │   N   │buffer end   │ N     │read from   ││
          │exceeds buf- ├──────►│>= 2*buffer  │──────►│buffer and  ││
          │fer end?     │       │size?        │       │keep data   ││
          └──────┬──────┘       └──────┬──────┘       └─────────────┘
                 │                     ▼ Y
                 │Y             ┌─────────────┐       ┌─────────────┐
                 │              │buffer is    │ N     │read from   ││
                 │              │retained?    │──────►│buffer and  ││
                 │              │             │       │chip data   ││
                 │              └──────┬──────┘       └─────────────┘
                 │                     │
                 │                     │              ┌─────────────┐
                 │                     │              │read from   ││
                 │                     └─────────────►│buffer and  ││
                 │                                    │keep data   ││
                 │                                    └─────────────┘
                 ▼
          ┌─────────────┐       ┌─────────────┐       ┌─────────────┐
          │exceeding >  │   N   │channel data │ N     │extend size+││
          │buffer size? │──────►│>= exceeding?│──────►│exceeding,  ││
          │             │       │             │       │ret. channel││
          └──────┬──────┘       └──────┬──────┘       └─────────────┘
                 │                     │
                 │Y                    │Y             ┌─────────────┐
                 │                     │              │extend size+││
                 │                     └─────────────►│exceeding,  ││
                 │                                    │ret. amount ││
                 │                                    └─────────────┘
                 │
                 │              ┌─────────────┐       ┌─────────────┐
                 │              │channel data │ N     │extend size,││
                 └─────────────►│>= exceeding?│──────►│ret. channel││
                                │             │       │            ││
                                └──────┬──────┘       └─────────────┘
                                       │
                                       │Y             ┌─────────────┐
                                       │              │extend size,││
                                       └─────────────►│ret. amount ││
                                                      │            ││
                                                      └─────────────┘
